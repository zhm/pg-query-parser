{"version":3,"sources":["../src/utils.js"],"names":["walk","first","all","tables","byType","clean","EXIT","obj","func","isArray","item","results","push","isObject","key","Object","keys","value","object","query","type","tree","location"],"mappings":"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","file":"utils.js","sourcesContent":["import _ from 'lodash';\r\n\r\nconst EXIT = {};\r\n\r\nexport function walk(obj, func) {\r\n  if (_.isArray(obj)) {\r\n    for (const item of obj) {\r\n      if (func(obj, item) === EXIT) {\r\n        return item;\r\n      }\r\n    }\r\n\r\n    const results = [];\r\n\r\n    for (const item of obj) {\r\n      results.push(walk(item, func));\r\n    }\r\n\r\n    return results;\r\n  } else if (_.isObject(obj)) {\r\n    for (const key of Object.keys(obj)) {\r\n      const value = obj[key];\r\n\r\n      if (func(obj, key, value) === EXIT) {\r\n        return obj;\r\n      }\r\n    }\r\n\r\n    const results = [];\r\n\r\n    for (const key of Object.keys(obj)) {\r\n      const value = obj[key];\r\n\r\n      results.push(walk(value, func));\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  if (func(obj) === EXIT) {\r\n    return obj;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function first(obj, func) {\r\n  return walk(obj, (object, key, value) => {\r\n    if (func(object, key, value)) {\r\n      return EXIT;\r\n    }\r\n\r\n    return null;\r\n  });\r\n}\r\n\r\nexport function all(obj, func) {\r\n  const results = [];\r\n\r\n  walk(obj, (object, key, value) => {\r\n    if (func(object, key, value)) {\r\n      return results.push(object);\r\n    }\r\n\r\n    return null;\r\n  });\r\n\r\n  return results;\r\n}\r\n\r\nexport function tables(query) {\r\n  return all(query, (obj, key, value) => {\r\n    return key === 'RangeVar';\r\n  });\r\n}\r\n\r\nexport function byType(query, type) {\r\n  return all(query, (object, key, value) => {\r\n    return key === type;\r\n  });\r\n}\r\n\r\nexport function clean(tree) {\r\n  walk(tree, (object, key, value) => {\r\n    if (_.isArray(object)) {\r\n      return;\r\n    }\r\n\r\n    if (key === 'location') {\r\n      delete object.location;\r\n    }\r\n  });\r\n\r\n  return tree;\r\n}\r\n"]}